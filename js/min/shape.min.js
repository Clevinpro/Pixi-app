function Shape(){this.shapeArea=0}var app=new PIXI.Application(800,600,{antialias:!0});document.querySelector(".view").appendChild(app.view),app.stage.interactive=!0;var shapesArr=[];Shape.prototype.allAreas=0,Shape.prototype.shapesCounter=0,Shape.prototype.resetArea=function(){return this.allAreas=0},Shape.prototype.polygonArea=function(e,a,l){for(var t=0,r=l-1,i=0;i<l;i++)t+=(e[r]+a[i])*(a[r]-a[i]),r=i;return Math.floor(t/2*-1)},Shape.prototype.circleArea=function(e){return Math.floor(Math.PI*e*e)},Shape.prototype.ellipseArea=function(e,a){return Math.floor(Math.PI*a*e)},Shape.prototype.createShape=function(e,a){var l=this,t=665*Math.random()+20,r=e==t?620*Math.random()+20:e,i=16777215*Math.random();this.shapesCounter++,setShapesCounter();var n,s,p,o,h,c,A=6*Math.random()+1,g=new PIXI.Graphics;if(A<=1){g.beginFill(this.color,.5),g.lineStyle(5,16777215,.8),g.drawCircle(0,0,65),g.endFill(),n=circle.generateTexture(),s=new PIXI.Sprite(n),s.y=a,s.x=r,s.interactive=!0;this.shapeArea=this.circleArea(65),shapesArr.push(s),app.stage.addChild(s),s.click=function(e){l.allAreas=l.allAreas-l.shapeArea,setAllArea(),app.stage.removeChild(s)}}else if(A>1&&A<=2)g.beginFill(i,.5),g.lineStyle(5,16777215,.8),g.drawRect(0,0,100,115),g.endFill(),textureRectangle=g.generateTexture(),spriteRectangle=new PIXI.Sprite(textureRectangle),spriteRectangle.y=a,spriteRectangle.x=r,p=[100,200,200,100],o=[100,100,215,215],h=p.length,this.shapeArea=this.polygonArea(p,o,h),c=this.polygonArea(p,o,h),spriteRectangle.interactive=!0,shapesArr.push(spriteRectangle),app.stage.addChild(spriteRectangle),spriteRectangle.click=function(e){l.allAreas=l.allAreas-c,setAllArea(),app.stage.removeChild(spriteRectangle)};else if(A>2&&A<=3)g.beginFill(i,.5),g.lineStyle(5,16777215,.8),g.moveTo(100,100),g.lineTo(150,100),g.lineTo(175,125),g.lineTo(175,175),g.lineTo(150,200),g.lineTo(100,200),g.lineTo(75,175),g.lineTo(75,125),g.endFill(),n=g.generateTexture(),s=new PIXI.Sprite(n),s.y=a,s.x=r,s.interactive=!0,shapesArr.push(s),p=[100,150,175,175,150,100,75],o=[100,100,125,175,200,200,175],h=p.length,this.shapeArea=this.polygonArea(p,o,h,s),c=this.polygonArea(p,o,h,s),app.stage.addChild(s),s.click=function(e){l.allAreas=l.allAreas-c,setAllArea(),app.stage.removeChild(s)};else if(A>3&&A<=4)g.beginFill(i,.5),g.lineStyle(5,16777215,.8),g.moveTo(100,150),g.lineTo(150,50),g.lineTo(175,150),g.lineTo(100,150),g.endFill(),n=g.generateTexture(),s=new PIXI.Sprite(n),s.y=a,s.x=r,s.interactive=!0,shapesArr.push(s),p=[100,150,175],o=[150,50,150],h=p.length,this.shapeArea=this.polygonArea(p,o,h),c=this.polygonArea(p,o,h),console.log("triangle",c),app.stage.addChild(s),s.click=function(e){l.allAreas=l.allAreas-c,setAllArea(),app.stage.removeChild(s)};else if(A>4&&A<=5){r=e==t?580*Math.random()+20:e,g.beginFill(i,.5),g.lineStyle(5,16777215,.8),g.drawEllipse(0,0,60,35),g.endFill(),n=g.generateTexture(),s=new PIXI.Sprite(n),s.y=a,s.x=r,s.interactive=!0,shapesArr.push(s);this.shapeArea=this.ellipseArea(60,35),c=this.ellipseArea(60,35),app.stage.addChild(s),s.click=function(e){l.allAreas=l.allAreas-c,setAllArea(),app.stage.removeChild(s)}}else A>5&&A<=6?(g.beginFill(i,.5),g.lineStyle(5,16777215,.8),g.drawPolygon([550,100,630,155,600,250,500,250,470,155,550,100]),g.endFill(),n=g.generateTexture(),s=new PIXI.Sprite(n),s.y=a,s.x=r,s.interactive=!0,shapesArr.push(s),p=[550,630,600,500,470],o=[100,155,250,250,155],h=p.length,this.shapeArea=this.polygonArea(p,o,h),c=this.polygonArea(p,o,h),app.stage.addChild(s),s.click=function(e){l.allAreas=l.allAreas-c,setAllArea(),app.stage.removeChild(s)}):A>6&&A<=7&&(g.beginFill(i,.5),g.moveTo(220,220),g.quadraticCurveTo(260,240,280,220),g.lineTo(280,220),g.quadraticCurveTo(316,240,340,220),g.lineTo(340,220),g.quadraticCurveTo(376,240,400,220),g.lineTo(400,220),g.quadraticCurveTo(440,200,400,180),g.lineTo(400,180),g.quadraticCurveTo(380,160,340,180),g.lineTo(340,180),g.quadraticCurveTo(310,160,280,180),g.lineTo(280,180),g.quadraticCurveTo(240,160,220,180),g.lineTo(220,180),g.quadraticCurveTo(185,200,220,220),g.endFill(),n=g.generateTexture(),s=new PIXI.Sprite(n),s.y=a,s.x=r,s.interactive=!0,shapesArr.push(s),p=[220,260,280,316,340,376,400,440,400,380,340,310,280,240,220,185],o=[220,240,220,240,220,240,220,200,180,160,180,160,180,160,180,200],h=p.length,this.shapeArea=this.polygonArea(p,o,h)*-1,c=this.polygonArea(p,o,h)*-1,app.stage.addChild(s),console.log("clouds",c),s.click=function(e){l.allAreas=l.allAreas-c,setAllArea(),app.stage.removeChild(s)});this.allAreas+=this.shapeArea,console.log(shapesArr),setAllArea()};